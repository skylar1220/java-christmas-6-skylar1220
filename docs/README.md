# 📌 핵심 기능: 날짜와 메뉴에 따라 누적된 할인 내역과 금액 도출하기!
# 👩‍💻프로그램 동작 흐름


# 📝기능 구현 목록

- 방문 날짜를 생성하는 기능
  - [x] 입력 받은 날짜를 통해 방문 날짜를 생성한다.
- 주문을 생성하는 기능
  - [x] 입력 받은 메뉴와 수량을 통해 주문을 생성한다. 
- 총 구매 금액을 계산하는 기능
  - [x] 주문 목록을 통해 총 구매 금액을 계산한다.
- 할인 항목과 금액을 계산하는 기능
  - [ ] 주문을 통해 할인 항목과 금액을 계산한다.
- 총 할인 금액을 계산하는 기능(증정 혜택 적용 전)
  - 할인 항목과 금액을 통해 총 할인 금액을 계산한다.
- 증정 혜택을 부여하는 기능
  - [ ] 할인 전 총 주문 금액을 통해 증정 혜택을 부여한다.
- 총 할인 금액을 계산하는 기능(증정 혜택 적용 후)
  - 총 할인 금액에 증정 헤택을 더한 최종 할인 금액을 계산한다.
- 이벤트 배지를 부여하는 기능
  - [ ] 총 혜택 금액을 통해 이벤트 배지를 부여한다.


## 🖨️ 입출력 기능

### 입력 기능

- [x] 방문 날짜 입력받는 기능 
- [x] 메뉴와 개수를 입력받는 기능  

### 출력 기능

- [ ] 주문 메뉴 출력하는 기능
- [ ] 할인 전 총주문 금액 출력하는 기능
- [ ] 증정 메뉴 출력하는 기능
- [ ] 혜택 내역 출력하는 기능
- [ ] 총혜택 금액 출력하는 기능
- [ ] 할인 후 예상 결제 금액 출력하는 기능
- [ ] 12월 이벤트 배지 출력하는 기능

## ⚠️ 예외 처리  

- 방문 날짜 입력 받을 때: "[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요."
- [x] 방문 날짜 입력 형식의 유효성 검증
    - [x] 공백이 아닌지
    - [x] 숫자인지
    - [x] Integer 범위내 숫자인지
- [x] 방문 날짜의 유효성 검증
    - [x] 1 이상 31 이하의 숫자인지 


- 메뉴와 개수를 입력받을 때 :  "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."
- [x] 입력 형식의 유효성 검증
  - [x] 메뉴-갯수 조합 모임 입력 형식의 유효성 검증
    - [x] 공백이 아닌지
    - ~~[ ] ","로 구분되어 들어오는지~~
    - [x] ","가 2번이상 연속으로 들어가지 않는지
    - [x] 맨 앞, 뒤에 ","가 있지 않은지
  - [x] 개별 메뉴-갯수 조합 입력 형식의 유효성 검증 
    - [x] "-"로 구분되어 들어오는지
    - [x] 맨 앞, 뒤에 "-"가 있지 않은지
    - [x] "-"가 2번이상 연속으로 들어가지 않는지
  - [x] 갯수 입력 형식의 유효성 검증
    - [x] 숫자인지
    - [x] Integer 범위내 숫자인지

- [x] 메뉴의 유효성 검증
  - [x] 메뉴판에 있는 메뉴인지

- [x] 갯수의 유효성 검증
  - [x] 1 이상인지

- [x] 메뉴-갯수 조합 모임의 유효성 검증
  - [x] 메뉴 갯수가 1~20개 사이인지
  - [x] 중복되는 메뉴가 없는지
  - [x] 음료만 주문하지는 않았는지

# 📌 추가 요구 사항
- [ ] 도메인 로직에 단위 테스트를 구현해야 한다. 단, UI(System.out, System.in, Scanner) 로직은 제외한다.
- [ ] 사용자가 잘못된 값을 입력할 경우 IllegalArgumentException를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
  - Exception이 아닌 IllegalArgumentException, IllegalStateException 등과 같은 명확한 유형을 처리한다.
- [ ] 아래 있는 InputView, OutputView 클래스를 참고하여 입출력 클래스를 구현한다. 
  - 입력과 출력을 담당하는 클래스를 별도로 구현한다. 
  - 해당 클래스의 패키지, 클래스명, 메서드의 반환 타입과 시그니처는 자유롭게 구현할 수 있다.
  ```java
  public class InputView {
      public int readDate() {
          System.out.println("12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)");
          String input = Console.readLine();    
          // ...
      }
      // ...
  }
  ```
  ```java
  public class OutputView {
      public void printMenu() {
          System.out.println("<주문 메뉴>");
          // ...
      }
      // ...
  }
  ```

# 🛠 리팩토링 목록   
- [ ] 요구사항 하나씩 줄쳐가면서 빠뜨린 것 없는지 확인
- [ ] 예외 메시지 필요한 부분만 상수화
- [ ] 숫자 리터럴 상수화
- [ ] 컨트롤러 메소드 네이밍 정리 및 분리 개선  
- [ ] 의존관계 그려보고 조정하기
- [ ] 각 클래스의 책임 범위 위반한 것 없는지 점검하기
- [ ] 각 클래스 점검하기 (접근제어자, 생성자, 메소드 순서 등)
- [ ] 원시값 포장
- [ ] 테스트 클래스 리팩토링
- [ ] getter 리스트 레퍼런스에 unmodifaible 추가 
- [ ] 이해를 위한 코드 전반의 공백 추가 
- [ ] 메서드 길이가 15자를 넘어가지 않는지 확인
- [ ] 필요한 테스트가 되어있는지 확인
- [ ] 생성자가 투명한지
- [ ] 부생성자가 합당한지, 
- [ ] 부생성자가 있는 경우 생성자의 접근제어자가 private인지
- [ ] order.sumCountWith(count): 디미터 법칙 점검


# 🧐 고민해볼 주제
- [ ] 현재 수준에서 지나친 기능분리가 가독성을 떨어뜨릴 수 있다. 너무 파편화되어있거나 하는 경우!
- [ ] 맨 위에 핵심기능 한 문장 작성해놓고, 동작가능한 가장 핵심 기능을 작은 단위로 구현을 가장 먼저 하자!



# 빠뜨린 것 없는지 기능 요구 사항 원본과 비교!!
#### 메뉴
- [ ] <애피타이저>
  - [ ]양송이수프(6,000), 타파스(5,500), 시저샐러드(8,000)

- [ ]<메인>
  - [ ]티본스테이크(55,000), 바비큐립(54,000), 해산물파스타(35,000), 크리스마스파스타(25,000)

- [ ]<디저트>
  - [ ]초코케이크(15,000), 아이스크림(5,000)

- [ ]<음료>
  - [ ]제로콜라(3,000), 레드와인(60,000), 샴페인(25,000)

#### 달력
- [ ] 달력
![](image.png)

#### 12월 이벤트 계획

- [ ] 크리스마스 디데이 할인
  - [ ] 이벤트 기간: 2023.12.1 ~ 2023.12.25
  - [ ] 1,000원으로 시작하여 크리스마스가 다가올수록 날마다 할인 금액이 100원씩 증가
  - [ ] 총주문 금액에서 해당 금액만큼 할인  
    (e.g. 시작일인 12월 1일에 1,000원, 2일에 1,100원, ..., 25일엔 3,400원 할인)
- [ ] 평일 할인(일요일~목요일): 평일에는 디저트 메뉴를 메뉴 1개당 2,023원 할인
- [ ] 주말 할인(금요일, 토요일): 주말에는 메인 메뉴를 메뉴 1개당 2,023원 할인
- [ ] 특별 할인: 이벤트 달력에 별이 있으면 총주문 금액에서 1,000원 할인
- [ ] 증정 이벤트: 할인 전 총주문 금액이 12만 원 이상일 때, 샴페인 1개 증정
- [ ] 이벤트 기간: '크리스마스 디데이 할인'을 제외한 다른 이벤트는 2023.12.1 ~ 2023.12.31 동안 적용

#### 혜택 금액에 따른 12월 이벤트 배지 부여

- [ ] 총혜택 금액에 따라 다른 이벤트 배지를 부여합니다. 이 배지는 2024 새해 이벤트에서 활용할 예정입니다.
  배지에 따라 새해 이벤트 참여 시, 각각 다른 새해 선물을 증정할 예정입니다.
  - [ ] 5천 원 이상: 별
  - [ ] 1만 원 이상: 트리
  - [ ] 2만 원 이상: 산타

#### 고객에게 안내할 이벤트 주의 사항

- [ ] 총주문 금액 10,000원 이상부터 이벤트가 적용됩니다.
- [ ] 음료만 주문 시, 주문할 수 없습니다.
- [ ] 메뉴는 한 번에 최대 20개까지만 주문할 수 있습니다.  
  (e.g. 시저샐러드-1, 티본스테이크-1, 크리스마스파스타-1, 제로콜라-3, 아이스크림-1의 총개수는 7개)

#### '12월 이벤트 플래너' 개발 요청 사항

- [ ] 고객들이 식당에 방문할 날짜와 메뉴를 미리 선택하면 이벤트 플래너가 주문 메뉴, 할인 전 총주문 금액, 증정 메뉴, 혜택 내역, 총혜택 금액, 할인 후 예상 결제 금액, 12월 이벤트 배지 내용을 보여주기를 기대합니다.
- [ ] 12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)
  - [ ] 방문할 날짜는 1 이상 31 이하의 숫자로만 입력받아 주세요.
  - [ ] 1 이상 31 이하의 숫자가 아닌 경우, "[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요."라는 에러 메시지를 보여 주세요.
  - [ ] 모든 에러 메시지는 "[ERROR]"로 시작하도록 작성해 주세요.
- [ ] 주문하실 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)
  - [ ] 고객이 메뉴판에 없는 메뉴를 입력하는 경우, "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."라는 에러 메시지를 보여 주세요.
  - [ ] 메뉴의 개수는 1 이상의 숫자만 입력되도록 해주세요. 이외의 입력값은 "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."라는 에러 메시지를 보여 주세요.
  - [ ] 메뉴 형식이 예시와 다른 경우, "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."라는 에러 메시지를 보여 주세요.
  - [ ] 중복 메뉴를 입력한 경우(e.g. 시저샐러드-1,시저샐러드-1), "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."라는 에러 메시지를 보여 주세요.
  - [ ] 모든 에러 메시지는 "[ERROR]"로 시작하도록 작성해 주세요.
- [ ] 주문 메뉴의 출력 순서는 자유롭게 출력해 주세요.
- [ ] 총혜택 금액에 따라 이벤트 배지의 이름을 다르게 보여 주세요.
- [ ] 총혜택 금액 = 할인 금액의 합계 + 증정 메뉴의 가격
- [ ] 할인 후 예상 결제 금액 = 할인 전 총주문 금액 - 할인 금액
- [ ] 증정 메뉴
  - [ ] 증정 이벤트에 해당하지 않는 경우, 증정 메뉴 "없음"으로 보여 주세요.
- [ ] 혜택 내역
  - [ ] 고객에게 적용된 이벤트 내역만 보여 주세요.
  - [ ] 적용된 이벤트가 하나도 없다면 혜택 내역 "없음"으로 보여 주세요.
  - [ ] 혜택 내역에 여러 개의 이벤트가 적용된 경우, 출력 순서는 자유롭게 출력해주세요.
- [ ] 이벤트 배지
  - [ ] 이벤트 배지가 부여되지 않는 경우, "없음"으로 보여 주세요.
- [ ] 적용된 이벤트가 하나도 없는 경우는 아래 예시를 참고해 주세요.

### 없음 예시
안녕하세요! 우테코 식당 12월 이벤트 플래너입니다.
12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)
- [ ] 26 
주문하실 메뉴를 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)
- [ ] 타파스-1,제로콜라-1 
12월 26일에 우테코 식당에서 받을 이벤트 혜택 미리 보기!
 
<주문 메뉴>
- [ ] 타파스 1개
- [ ] 제로콜라 1개

<할인 전 총주문 금액>
- [ ] 8,500원
 
<증정 메뉴>
- [ ] 없음
 
<혜택 내역>
- [ ] 없음
 
<총혜택 금액>
- [ ] 0원
 
<할인 후 예상 결제 금액>
- [ ] 8,500원
 
<12월 이벤트 배지>
- [ ] 없음

### 있음 예시
안녕하세요! 우테코 식당 12월 이벤트 플래너입니다.
12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)
- [ ] 3
주문하실 메뉴를 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)
- [ ] 티본스테이크-1,바비큐립-1,초코케이크-2,제로콜라-1
12월 3일에 우테코 식당에서 받을 이벤트 혜택 미리 보기!
 
<주문 메뉴>
- [ ] 티본스테이크 1개
- [ ] 바비큐립 1개
- [ ] 초코케이크 2개
- [ ] 제로콜라 1개
 
<할인 전 총주문 금액>
- [ ] 142,000원
 
<증정 메뉴>
- [ ] 샴페인 1개
 
<혜택 내역>
- [ ] 크리스마스 디데이 할인: -1,200원
- [ ] 평일 할인: -4,046원
- [ ] 특별 할인: -1,000원
- [ ] 증정 이벤트: -25,000원
 
<총혜택 금액>
- [ ] -31,246원
 
<할인 후 예상 결제 금액>
- [ ] 135,754원
 
<12월 이벤트 배지>
- [ ] 산타